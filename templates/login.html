<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tempcover - Short Term Insurance</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <style>
    /* Remove bottom spacing */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-y: hidden; /* Prevents scrolling beyond the content */
    }

    .top-band {
      width: 100%;
      background-color: #f0f0f0;
      height: 50px;
    }
    .main-header, .main-footer {
      text-align: center;
      margin-bottom: 0rem;
    }
    .main-header {
      margin-top: 0rem;
    }
    .main-header h1 {
      margin-bottom: 0rem;
      font-size: 1.7rem;
      margin-left: 560px;
      color: #234397;
      transform: translateY(-120px);
    }
    .validation-form {
      margin-left: 510px;
      transform: translateY(-220px);
    }
    .security-info {
      max-width: 1200px;
      margin-left:510px;
      transform: translateY(-275px);
      color:#000000;
    }
    .security-info p{
      font-size: 19px;
    }
    .phs {
      max-width: 300px;
      margin: 0 ;
      margin-left: 522px;
      transform: translateY(-330px);
    }
    .phs label {
      font-size: 18.5px;
      font-weight: 650;
      color: #234397;
    }
    .pdob {
      max-width: 333px;
      margin: 0 auto;
      margin-left: 489px;
      transform: translateY(-330px);
    }
    .pdob label {
      font-size: 18.5px;
      font-weight: 650;
      color: #234397;
    }
    .psd {
      max-width: 255px;
      margin: 0 auto;
      margin-left: 567px;
      transform: translateY(-330px);
    }
    .psd label {
      font-size: 18.5px;
      font-weight: 650;
      color: #234397;
    }
    .input-container input[type="text"] {
      width: 335%;
      border: 1.8px solid #234397;
      border-radius: 2px;
      height: 45px;
      margin: 0rem auto;
      padding-left: -6px;
      cursor: text;
    }
  
  .pdob .input-container input[type="text"] {
    width: 342%; /* Matches the width of the other input boxes */
    border: 1.8px solid #234397;
    border-radius: 2px;
    height: 45px;
    margin: 0rem auto;
    padding-left: -6px;
    cursor: text;
    margin-left: -2px;
	cursor: pointer;
  }
  .psd .input-container input[type="text"] {
    width: 327%; /* Matches the width of the other input boxes */
    border: 1.8px solid #234397;
    border-radius: 2px;
    height: 45px;
    margin: 0rem auto;
    padding-left: -6px;
    cursor: text;
    margin-left: 2px;
	cursor: pointer;
  }
    .input-container input[type="date"] {
      position: absolute;
      width: 137.5%;
      border: 1.7px solid #234397;
      border-radius: 2px;
      height: 45px;
      margin: 0rem;
      margin-left: -6px;
      padding-top: 25px;
      cursor: pointer;
    }
    .form-section {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      position:relative;
    }
    .form-section label {
      white-space: nowrap;
      margin-right: 1rem;
      flex-shrink: 0;
    }
    .submit-button button[type="submit"]{
      background-color: #6ba125;
      color:white;
      padding:10px 0px;
      border:none;
      border-radius: 0px;
      cursor:pointer;
      width:83px;
      text-align:center;
      margin:0 rem auto;
      transform: translateY(-310px);
      margin-left:860px;
      line-height:16px;
      font-size: 16px;
      font-weight:650;
    }
    .reference-section {
      margin-left:1160px;
      transform: translateY(-720px);
    }
    .reference-section2 {
      margin-left:1160px;
      transform: translateY(-750px)
    }
    .reference-section p {
	width:400px;
      padding: 0.25rem 1rem 0.75rem 1rem;
      padding-right: 0px;
      display: inline-block;
      background: #f8f8f8;
      border: 1px solid #000;
      height: 48px;
      text-align:left;
      font-size:19px;
    }
    .reference-section2 p {
      padding: 0.25rem 1rem 0.75rem 1rem;
      padding-right: 94px;
      display: inline-block;
      background: #f8f8f8;
      border: 1px solid #000000;
      height: 45px;
      text-align: left;
      font-size:18px;
      font-weight:650;
    }
    .blue-box {
      width: 320px; 
      height: 85px; 
      background-color: #f7f7f7; 
      transform: translateY(-320px);
      margin-left: 750px;
      display: flex;
      align-items: center;
      padding-left: 20px;
    }
    
    
    .logo-container {
      width: 19.5%;
      margin-left: 490px;
      transform: translateY(30px);
    }
  </style>
</head>
<body>
  <div class="top-band"></div>
  <div class="logo-container">
    <a href="https://www.tempcover.com/">
      <img src="https://raw.githubusercontent.com/Pkkothapelly/test/main/TempcoverLogo.jpg" alt="Company Logo">
    </a>
  </div>
  <header class="main-header">
    <h1>SHORT TERM INSURANCE</h1>
    <p style="margin-left: 492px; font-size:16px; color:#234397; transform:translateY(-125px)">We are the UK's largest temporary and short term insurance provider.</p>
  </header>

  <main>
    <section class="validation-form">
      <h2 style="font-size: 41px; color: #000000">USER VALIDATION</h2>
    </section>
	<form action="/login" method="post">
    <section class="security-info">
      <p>FOR SECURITY PURPOSES, BEFORE ACCESSING YOUR POLICY DOCUMENTS, PLEASE CONFIRM THE FOLLOWING INFORMATION.</p>
    </section>

    <div class="input-group-container">
      <section class="phs"> 
        <div class="form-section">
          <label for="surname">Policyholder surname</label>
          <div class="input-container">
            <input type="text" id="surname" name="surname" placeholder="Surname">
          </div>
        </div>
      </section>
        
      <section class="pdob">
        <div class="form-section">
          <label for="dob">Policyholder date of birth</label>
          <div class="input-container">
            <input type="text" id="dob_display" name="dob_display" placeholder="Date of birth" readonly>
          </div>
        </div>
      </section>

      <section class="psd">
        <div class="form-section">
          <label for="start-date">Policy start date</label>
          <div class="input-container">
            <input type="text" id="start_date_display" name="start_date_display" placeholder="Policy start date" readonly>
          </div>
        </div>
      </section>
    </div>

	

	<div class="blue-box">
      <div class="g-recaptcha" data-sitekey="6LdNRnQqAAAAABCqLOeeNBOKS9YHv6zFIknZtKZJ"></div>
      
    </div>

      
    <section class="submit">
      <div class="submit-button">
        <button type="submit">SUBMIT</button>
      </div>
    </section>
    
   <div class="reference-section">
  {% if policy_number %}
    <p>Your reference: <span style="font-weight: 650; color: #000;">{{ policy_number }}</span></p>
  {% else %}
    <p>Your reference: <span style="font-weight: 650; color: #000;">N/A</span></p>
  {% endif %}
</div>

    <div class="reference-section2">
      <p style="color: #000;">Policy: Fully comprehensive cover</p>
    </div>
  </main>
  </form>
</body>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script>
  $(function() {
    // Initialize the date picker for date input fields
    $("#dob_display, #start_date_display").datepicker({
      dateFormat: "dd MM yy",
      changeMonth: true,
      changeYear: true,
      yearRange: "-100:+0"
    });

    // Apply real-time validation for each input field
    $('#surname, #dob_display, #start_date_display').on('input change', function() {
      validateField($(this));
    });

    // AJAX form submission with validation
    $('form').on('submit', function(event) {
      event.preventDefault(); // Prevent normal form submission

      const surname = $('#surname').val().trim();
      const dob = $('#dob_display').val().trim();
      const startDate = $('#start_date_display').val().trim();

      // Check if each field is filled and only proceed with AJAX if all fields are valid
      if (surname && dob && startDate) {
        $.ajax({
          url: '/login',
          method: 'POST',
          data: {
            surname: surname,
            dob_display: dob,
            start_date_display: startDate
          },
          success: function(response) {
            if (!response.error) {
              window.location.href = response.redirect_url;
            } else {
              showError("We don't have you in our database.");
            }
          },
          error: function() {
            showError("An error occurred. Please try again later.");
          }
        });
      }
    });

    // Function to validate each field and apply appropriate border color
    function validateField(input) {
      if (input.val().trim() === '') {
        input.css('border', '2px solid red');
      } else {
        input.css('border', '2px solid green');
      }
    }

    // Function to display error messages
    function showError(message) {
      const errorContainer = $('#error-message');
      if (errorContainer.length === 0) {
        $('<div id="error-message" style="color: red; text-align: center; margin-top: 1rem;">')
          .text(message)
          .insertAfter('form');
      } else {
        errorContainer.text(message);
      }
    }
  });
</script>



</html>
